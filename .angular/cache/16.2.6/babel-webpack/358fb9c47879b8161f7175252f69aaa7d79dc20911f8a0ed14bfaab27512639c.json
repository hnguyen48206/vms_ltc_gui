{"ast":null,"code":"import _asyncToGenerator from \"C:/Users/HoangN/Desktop/NW/LTC_GUI/base_ltc_clarity/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { CLARITY_MOTION_REVERSE_ANIMATION_SUFFIX as t, AnimationStatus as n, CLARITY_MOTION_REVERSE_ANIMATION_LABEL as o, CLARITY_MOTION_FALLBACK_EASING as i, CLARITY_MOTION_FALLBACK_DURATION_IN_MS as r, CLARITY_MOTION_ENTER_LEAVE_PROPERTY as e } from \"./interfaces.js\";\nimport { LogService as s } from \"../services/log.service.js\";\nimport { ClarityMotion as a } from \"./motion.service.js\";\nimport u from \"ramda/es/clone\";\nimport { isCssPropertyName as c, getCssPropertyValue as f } from \"../utils/css.js\";\nimport { isSuffixedBy as m, getNumericValueFromCssSecondsStyleValue as l, isPrefixedBy as p, removePrefix as h } from \"../utils/string.js\";\nimport { queryChildFromLightOrShadowDom as g } from \"../utils/dom.js\";\nimport { allPropertiesPass as d } from \"../utils/identity.js\";\nimport { getMillisecondsFromSeconds as y } from \"../utils/math.js\";\nfunction w(_x, _x2) {\n  return _w.apply(this, arguments);\n}\nfunction _w() {\n  _w = _asyncToGenerator(function* (t, n) {\n    if (!n._animations) return s.warn(n.tagName.toLocaleLowerCase() + \" is trying to animate but no animations are defined.\"), !1;\n    const o = z(n._animations, t);\n    return yield Promise.all(o.map(o => {\n      const [i, r] = o;\n      if (t.get(i) === n[i]) return !1;\n      const e = r[n[i].toString()],\n        s = n.cdsMotion,\n        [a, c] = M(e, x(s, i, n[i].toString()));\n      let f = u(c);\n      if (f.length < 1) return !1;\n      f = O(a, f, n);\n      const m = b(e, f, n);\n      return Promise.all(m).then(() => (v(e, n), !0));\n    })).then(t => t.indexOf(!0) > -1).catch(() => !1);\n  });\n  return _w.apply(this, arguments);\n}\nfunction j(t, o) {\n  o.getAttribute(\"_cds-animation-status\") !== n.active && (o.setAttribute(\"_cds-animation-status\", n.active), o.cdsMotionChange.emit(`${t} animation ${n.start}`));\n}\nfunction v(t, o) {\n  o.setAttribute(\"_cds-animation-status\", n.ready), o.cdsMotionChange.emit(`${t} animation ${n.end}`);\n}\nfunction O(t, n, o) {\n  const i = o.cdsMotion,\n    r = !i || \"off\" === i;\n  return S(t) && (n = C(n)), r ? B(n) : $(n = N(n, o), o);\n}\nfunction b(t, n, o) {\n  return n.filter(t => !t.onlyIf || d(o, t.onlyIf)).map(n => (j(t, o), new Promise(t => {\n    const i = A(o, n.target).animate(P(n.animation, o), n.options || {}),\n      r = () => {\n        t(\"animation finished\"), i.removeEventListener(\"finish\", r);\n      };\n    i.addEventListener(\"finish\", r);\n  })));\n}\nfunction A(t, n) {\n  return g(t, n) || t;\n}\nfunction P(t, n) {\n  return Array.isArray(t) ? R(t, n) : t;\n}\nfunction S(n) {\n  return m(n, t);\n}\nfunction C(t) {\n  return t.map(t => (t.options ? t.options.direction = o : t.options = {\n    direction: o\n  }, t));\n}\nfunction _(t) {\n  return t + \"-\" + o;\n}\nfunction x(t, n, o) {\n  if (!t || !n || void 0 === o) return \"\";\n  if (\"on\" === t || \"off\" === t) return \"\";\n  let i;\n  try {\n    i = JSON.parse(t);\n  } catch (t) {\n    return \"\";\n  }\n  return i[n] && i[n][o] || \"\";\n}\nfunction E(n) {\n  return S(n) ? n.slice(0, -1 * t.length) : n;\n}\nfunction L(t, n) {\n  return n && a.has(E(n)) ? n : t;\n}\nfunction M(t, n) {\n  const o = L(t, n);\n  return [o, u(a.get(E(o)))];\n}\nfunction N(t, n) {\n  return I(\"duration\", n, t, r, t => y(l(t)));\n}\nfunction $(t, n) {\n  return I(\"easing\", n, t, i);\n}\nfunction B(t) {\n  return t.map(t => (t.options ? (t.options.duration = 0, t.options.easing = i) : t.options = {\n    duration: 0,\n    easing: i\n  }, t));\n}\nfunction I(t, n, o, i, r) {\n  return o.map(o => {\n    if (o.options) {\n      if (o.options[t]) {\n        if (c(o.options[t])) {\n          const e = o.options[t];\n          let s = f(e, n);\n          s ? r && (s = r(s)) : s = i, o.options[t] = s;\n        }\n      } else o.options[t] = i;\n    } else {\n      const n = {};\n      n[t] = i, o.options = n;\n    }\n    return o;\n  });\n}\nfunction R(t, n) {\n  return Array.isArray(t) ? t.map(t => {\n    var _t$height, _t$width;\n    if (Object.prototype.hasOwnProperty.call(t, \"height\") && p((t === null || t === void 0 || (_t$height = t.height) === null || _t$height === void 0 ? void 0 : _t$height.toString()) || \"\", \"from:\")) {\n      var _t$height2;\n      const o = h((t === null || t === void 0 || (_t$height2 = t.height) === null || _t$height2 === void 0 ? void 0 : _t$height2.toString()) || \"\", \"from:\"),\n        i = g(n, o) || null;\n      t.height = i ? i.getBoundingClientRect().height + \"px\" : \"auto\";\n    }\n    if (Object.prototype.hasOwnProperty.call(t, \"width\") && p((t === null || t === void 0 || (_t$width = t.width) === null || _t$width === void 0 ? void 0 : _t$width.toString()) || \"\", \"from:\")) {\n      var _t$width2;\n      const o = h((t === null || t === void 0 || (_t$width2 = t.width) === null || _t$width2 === void 0 ? void 0 : _t$width2.toString()) || \"\", \"from:\"),\n        i = g(n, o) || null;\n      t.width = i ? i.getBoundingClientRect().width + \"px\" : \"auto\";\n    }\n    return t;\n  }) : t;\n}\nfunction J(t, n) {\n  if (null == t) return null;\n  let o = !0;\n  const i = {};\n  return Object.getOwnPropertyNames(t).forEach(r => {\n    n.has(r) && void 0 !== n.get(r) && (i[r] = u(t[r]), o = !1);\n  }), o ? null : i;\n}\nfunction k(t, n) {\n  if (null == t) return [];\n  const [o, i] = t;\n  return o.length > 0 ? n ? [].concat(i, o) : [].concat(o, i) : i;\n}\nfunction q(t) {\n  const n = [],\n    o = [];\n  return Object.getOwnPropertyNames(t || {}).forEach(i => {\n    const r = [i, u(t[i])];\n    i === e ? n.push(r) : o.push(r);\n  }), [n, o];\n}\nfunction z(t, n) {\n  const o = J(t || {}, n);\n  return null === o ? [] : k(q(o), n.get(e));\n}\nexport { S as animationIsReversed, E as extractAnimationNameIfReversed, J as filterAnimationsByUpdatedProperties, k as flattenAndSortAnimations, M as getAnimationConfigForPropertyValue, L as getAnimationFromOverrideOrDecorator, P as getAnimationKeyframesOrPropertyIndexedFrames, b as getAnimationPromiseInstructions, A as getAnimationTarget, q as getHidingAndNonHidingPropertyAnimations, x as getInlineOverride, z as getPropertyAnimations, v as resolveAnimationEndStatus, _ as reverseAnimation, C as reverseAnimationConfig, w as runPropertyAnimations, O as setAnimationConfigOptions, N as setAnimationDuration, $ as setAnimationEasing, I as setAnimationProperty, j as setAnimationStartStatus, R as sizeDimensionKeyframes, B as zeroOutAnimationConfig };\n//# sourceMappingURL=utils.js.map","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}